@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_WITH_LEGEND()

Person(user, "Gebruiker")

Container(webApp, "TripTop App", "Spring Boot REST API")

ContainerDb(db, "Database", "Opslag voor boekingen")

Component(controller, "BetaalController", "REST Controller", "Ontvangt betaalverzoeken en activeert juiste strategie")
Component(factory, "BetaalStrategieFactory", "Factory", "Maakt de juiste strategie op basis van input")
Component(strategy, "BetaalStrategie", "Interface", "Abstractie voor alle betaalstrategieÃ«n")
Component(ideal, "IdealBetaling", "Strategie", "Implementeert betaling via iDEAL")
Component(paypal, "PaypalBetaling", "Strategie", "Implementeert betaling via PayPal")
Component(cc, "CreditcardBetaling", "Strategie", "Implementeert betaling via Creditcard")

Rel(user, webApp, "Doet betaling")
Rel(webApp, controller, "POST /betalen")
Rel(controller, factory, "Vraagt juiste strategie")
Rel(factory, ideal, "Geeft bij methode=ideal")
Rel(factory, paypal, "Geeft bij methode=paypal")
Rel(factory, cc, "Geeft bij methode=creditcard")
Rel(controller, strategy, "Gebruikt -> verwerkBetaling()")
Rel(strategy, db, "Opslaan transactie", "optioneel")

@enduml
